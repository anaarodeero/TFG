<div class="container" fxLayout="column" fxLayoutAlign="center center">
    <h1 class="mat-display-2 titulo">Tu plan para hoy</h1>
    <mat-card class="card-progress mat-elevation-z8" ngClass.md="card-md" ngClass.lt-sm="card-sm">
        <h1 class="sub-titulo">Nutrientes totales</h1>
        <div fxLayout="row" fxLayout.lt-md="column" fxLayoutAlign="space-around center">
            <div fxLayout="column" fxLayoutAlign="center center">
                <mat-progress-spinner class="progreso circuloFondo" mode="determinate" [strokeWidth]="18" [diameter]="150" [value]="100"></mat-progress-spinner>
                <mat-progress-spinner class="progreso" mode="determinate" [strokeWidth]="18" [diameter]="150" [value]="25"></mat-progress-spinner>
                <h1 class="message">25%</h1>
                <p class="texto">Carbohidratos</p>
                <p>X de Y</p>
            </div>
            <div fxLayout="column" fxLayoutAlign="center center">
                <mat-progress-spinner class="progreso circuloFondo" mode="determinate" [strokeWidth]="18" [diameter]="150" [value]="100"></mat-progress-spinner>
                <mat-progress-spinner class="progreso" mode="determinate" [strokeWidth]="18" [diameter]="150" [value]="50"></mat-progress-spinner>
                <h1 class="message">50%</h1>
                <p class="texto">Proteinas</p>
                <p>X de Y</p>
            </div>
            <div fxLayout="column" fxLayoutAlign="center center">
                <mat-progress-spinner class="progreso circuloFondo" mode="determinate" [strokeWidth]="18" [diameter]="150" [value]="100"></mat-progress-spinner>
                <mat-progress-spinner class="progreso" mode="determinate" [strokeWidth]="18" [diameter]="150" [value]="75"></mat-progress-spinner>
                <h1 class="message">75%</h1>
                <p class="texto">Grasas</p>
                <p>X de Y</p>
            </div>
            <div fxLayout="column" fxLayoutAlign="center center">
                <mat-progress-spinner class="progreso circuloFondo" mode="determinate" [strokeWidth]="18" [diameter]="150" [value]="100"></mat-progress-spinner>
                <mat-progress-spinner class="progreso" mode="determinate" [strokeWidth]="18" [diameter]="150" [value]="35"></mat-progress-spinner>
                <h1 class="message">35%</h1>
                <p class="texto">Kcalorias</p>
                <p>X de Y</p>
            </div>
            <!-- <div class="progressCircle" style="border: solid;">
                <mat-spinner class="circle circuloFondo" mode="determinate" value="100" [strokeWidth]="18" [diameter]="170"></mat-spinner>
                <mat-spinner class="circle" mode="determinate" value="25" [strokeWidth]="18" [diameter]="170"></mat-spinner>
                <div class="message"><h1>hola</h1></div>
            </div> -->
            
        </div>
    </mat-card>
    

   
    <mat-card class="card-table mat-elevation-z8" ngClass.md="card-md-exp" fxShow fxHide.lt-md>
        <h1 class="sub-titulo">Nutrientes por comida</h1>
        <mat-accordion *ngFor="let element of _dataSource.data">
            <mat-expansion-panel class="mat-elevation-z0" (opened)="panelOpenState = true"
                                 (closed)="panelOpenState = false" >
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        <div fxLayout="column" fxLayoutAlign="center start" class="nombre">
                            <p class="textoAlimentos">{{element.nombre}}</p>
                        </div>
                        <div fxLayout="column" fxLayoutAlign="center center" class="der" *ngFor="let property of element | keyvalue">
                            <p class="textoAlimentos">{{property.value}}</p>
                        </div>
                        <div fxLayout="column" fxLayoutAlign="center center" >
                            <button mat-icon-button class="boton" (click)="editFood(element.nombre);">
                                <mat-icon>edit</mat-icon>
                            </button>
                        </div>
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <div class="contenido" fxLayout="row" fxLayoutAlign="start center" *ngFor="let comida of element.alimentos">
                    <div fxLayout="column" fxLayoutAlign="center start" class="nombre">
                        <p class="textoAlimentos textoAlimentos-nombre"> - {{comida.alimento}}</p>
                    </div>
                    <div fxLayout="column" fxLayoutAlign="center center" class="der" *ngFor="let property of comida | keyvalue">
                        <p class="textoAlimentos">{{property.value}}</p>
                    </div>
                </div>
                <!-- <button mat-raised-button class="boton" (click)="editFood(element.nombre);">
                    <mat-icon>edit</mat-icon>
                    Editar comida
                </button> -->
            </mat-expansion-panel>
            <mat-divider inset=“true”></mat-divider>
          </mat-accordion>
    </mat-card>

    <mat-card class="card-table-sm mat-elevation-z8" fxShow fxHide.gt-sm>
        <mat-accordion *ngFor="let element of _dataSource.data">
            <mat-expansion-panel class="mat-elevation-z0" (opened)="panelOpenState = true"
                                 (closed)="panelOpenState = false" >
              <mat-expansion-panel-header>
                <mat-panel-title>
                    <div class="max" fxLayout="row" fxLayoutAlign="space-between center">
                        <div fxLayout="column" fxLayoutAlign="center start" class="nombre">
                            <p class="textoAlimentos">{{element.nombre}}</p>
                        </div>
                        <div fxLayout="column" fxLayoutAlign="center center">
                            <button mat-icon-button class="boton" (click)="editFood(element.nombre);">
                                <mat-icon>edit</mat-icon>
                            </button>
                        </div>
                    </div>
                </mat-panel-title>
              </mat-expansion-panel-header>
              <div class="contenido sm" fxLayout="row" fxLayoutAlign="end center" >
                <div fxLayout="column" fxLayoutAlign="center center" class="der-sm" *ngFor="let nutriente of nutrientes_sm">
                    <p class="textoAlimentos">{{nutriente}}</p>
                </div>
              </div>
              <div class="contenido sm" fxLayout="row" fxLayoutAlign="start center" *ngFor="let comida of element.alimentos">
                <div fxLayout="column" fxLayoutAlign="center start" class="der-sm">
                    <p class="textoAlimentos">{{comida.alimento}}</p>
                </div>
                <div fxLayout="column" fxLayoutAlign="center center" class="der-sm" *ngFor="let property of comida | keyvalue">
                    <p class="textoAlimentos">{{property.value}}</p>
                </div>
              </div>
            </mat-expansion-panel>
            <mat-divider inset=“true”></mat-divider>
          </mat-accordion>
          
    </mat-card>

    <mat-card id="cardTabla" class="card mat-elevation-z8" ngClass.lt-md="card-table-sm" *ngIf="show">
        <div fxLayout="column" fxLayoutAlign="center center">
            <label id="example-radio-group-label">Selecciona una comida para modificarla</label>
            <mat-radio-group aria-labelledby="example-radio-group-label" class="example-radio-group"
                [(ngModel)]="alimentoSeleccionado" >
                <mat-radio-button class="example-radio-button" *ngFor="let alimento of alimentos; let indice = index" [value]="alimento">
                {{alimento.alimento}}
                </mat-radio-button>
            </mat-radio-group>
            <button mat-button class="boton" (click)="mostrarTabla()">
                <mat-icon>edit</mat-icon>
                Modificar
            </button>
        </div>
        <div *ngIf="tablaShow">
            <div fxLayout="column" fxLayoutAlign="center center">
                <div fxLayout="row" fxLayoutAlign="end center" class="fila fila-lg" ngClass.lt-md="fila-sm" fxShow fxHide.lt-md>
                    <div fxLayout="column" fxLayoutAlign="center center" class="cuarto" *ngFor="let nutriente of nutrientes">
                        <p class="textoAlimento cap">{{nutriente}}</p>
                    </div>
                </div>
                <div fxLayout="row" fxLayoutAlign="end center" class="fila fila-lg" ngClass.lt-md="fila-sm" fxShow fxHide.gt-sm>
                    <div fxLayout="column" fxLayoutAlign="center center" class="cuarto" *ngFor="let nutriente of nutrientes_sm">
                        <p class="textoAlimento">{{nutriente}}</p>
                    </div>
                </div>
                <div fxLayout="row" fxLayoutAlign="center center" class="fila fila-lg" ngClass.lt-md="fila-sm">
                <div fxLayout="column" fxLayoutAlign="center center" class="cuarto" *ngFor="let property of alimentoSeleccionado | keyvalue">
                    <p class="textoAlimento">{{property.value}}</p>
                </div>
                </div>
                <h1 class="titulo">Alimentos con los mismos nutrientes para sustituir</h1>
            </div>
            <mat-form-field class="filtro">
                <mat-label>Filtro</mat-label>
                <input matInput (keyup)="applyFilter($event)" placeholder="Ex. ium" #input />
            </mat-form-field>
            <!-- TABLA PANTALLA GRANDE -->
            <table mat-table [dataSource]="dataSource" matSort fxShow fxHide.lt-md>
                <ng-container matColumnDef="select">
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell *matCellDef="let element">
                        <mat-checkbox [checked]="selected === element" (change)="selected = element; alimentoCambio = element">
                        </mat-checkbox>
                    </td>
                </ng-container>
                <ng-container matColumnDef="nombre">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Nombre</th>
                    <td mat-cell *matCellDef="let element">{{ element.nombre }}</td>
                </ng-container>
                <ng-container matColumnDef="carbohidratos">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="col-tabla-grande">Carbohidratos</th>
                    <td mat-cell *matCellDef="let element">{{ element.carbohidratos }}</td>
                </ng-container>
                <ng-container matColumnDef="proteinas">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="col-tabla-grande">Proteinas</th>
                    <td mat-cell *matCellDef="let element">{{ element.proteinas }}</td>
                </ng-container>
                <ng-container matColumnDef="grasas">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="col-tabla-grande">Grasas</th>
                    <td mat-cell *matCellDef="let element">{{ element.grasas }}</td>
                </ng-container>
                <ng-container matColumnDef="kcalorias">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="col-tabla-grande">Kcalorias</th>
                    <td mat-cell *matCellDef="let element">{{ element.kcalorias }}</td>
                </ng-container>
        
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        
                <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell" colspan="4">
                    No se han encontrado resultado que coincidan con este filtro "{{input.value}}"
                </td>
                </tr>
            </table>
            <!-- TABLA PANTALLA PEQUEÑA -->
            <table mat-table [dataSource]="dataSource" matSort fxShow fxHide.gt-sm multiTemplateDataRows>
                <ng-container matColumnDef="select">
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell *matCellDef="let element">
                        <mat-checkbox [checked]="selected === element" (change)="selected = element; alimentoCambio = element">
                        </mat-checkbox>
                    </td>
                </ng-container>
                <ng-container matColumnDef="nombre">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="tablaSustituir">Nombre</th>
                    <td mat-cell *matCellDef="let element">{{ element.nombre }}</td>
                </ng-container>
                <ng-container matColumnDef="action">
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell *matCellDef="let element">
                        <mat-icon (click)="expandedElement = expandedElement === element ? null : element">
                            {{expandedElement === element ? 'expand_less' : 'expand_more'}}
                        </mat-icon>
                    </td>
                </ng-container>
                <ng-container matColumnDef="expandedDetail">
                    <td mat-cell *matCellDef="let element" [attr.colspan]="displayedColumns_sm.length">
                        <div class="example-element-detail" [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
                            <div class="example-element-description">
                                <div>- Carbohidratos: {{ element.carbohidratos }}</div>
                                <div>- Proteinas: {{ element.proteinas }}</div>
                                <div>- Grasas: {{ element.grasas }}</div>
                                <div>- Kcalorias: {{ element.kcalorias }}</div>
                            </div>
                        </div>
                    </td>
                </ng-container>
        
                <tr mat-header-row *matHeaderRowDef="displayedColumns_sm"></tr>
                <tr mat-row *matRowDef="let element; columns: displayedColumns_sm" class="example-element-row"
                    [class.example-expanded-row]="expandedElement === element"
                    (click)="expandedElement = expandedElement === element ? null : element"></tr>
                <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
        
                <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell" colspan="4">
                    No se han encontrado resultado que coincidan con este filtro "{{input.value}}"
                </td>
                </tr>
            </table>
            <!-- <div fxLayout="row" fxLayoutAlign="space-between center"> -->
            <mat-paginator [pageSize]="5" [pageSizeOptions]="[5, 10, 20]">
            </mat-paginator>
            <div fxLayout="column" fxLayoutAlign="center center">
                <button mat-raised-button class="botonRegistro">Mostrar todos</button>
                <button mat-button [disabled]="!alimentoCambio" class="botonRegistro">
                    <mat-icon>published_with_changes</mat-icon>
                    Realizar cambio
                </button>
            </div>
        </div>
    </mat-card>
      
    
</div>